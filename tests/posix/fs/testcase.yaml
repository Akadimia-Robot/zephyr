common:
  # Currently, POSIX subsystem and "posix" pseudo-arch don't work well
  # together. This is supposed to be addressed later.
  # riscv toolchain lacks sys/timespec.h (maybe something else), so not
  # good for POSIX.
  arch_exclude: nios2 posix riscv32 xtensa
  # qemu_x86_64 currently uses Linux host toolchains, which leaks host
  # headers into the build.
  platform_exclude: qemu_x86_64
  min_ram: 128
  tags: posix filesystem
tests:
  portability.posix:
    extra_configs:
      - CONFIG_NEWLIB_LIBC=n
  portability.posix.newlib:
    filter: TOOLCHAIN_HAS_NEWLIB == 1
    extra_configs:
      - CONFIG_NEWLIB_LIBC=y
