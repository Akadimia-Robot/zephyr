# Copyright (c) 2021 Nordic Semiconductor (ASA)
# SPDX-License-Identifier: Apache-2.0

menuconfig IPC_SERVICE
	bool "IPC service support multiple backends"
	help
	  Enables support for a service that can be shared by multiple
	  users. Ability to work in different backends. The backend
	  should be registered before application starts using
	  the IPC Service.

if IPC_SERVICE

choice IPC_SERVICE_BACKEND
	prompt "IPC Service backend"

config IPC_SERVICE_BACKEND_RPMSG_MULTI_INSTANCE
	bool "RPMsg multiple instance backend"
	select RPMSG_MULTI_INSTANCE

config IPC_SERVICE_BACKEND_RPMSG_MULTI_CORE
	bool "RPMsg multiple core backend"
	select RPMSG_MULTI_INSTANCE

endchoice

config IPC_BACKEND_RPMSG_WORK_QUEUE_STACK_SIZE

int "Size of RX work queue stack"
	default 1024
	help
	  Size of stack used by work queue RX thread. This work queue is
	  created in the multi-instance / multi-core RPMsg backend module to
	  prevent notifying service users about received data from the system
	  work queue.  Size is the same for all instances.

config IPC_BACKEND_RPMSG_NUM_ENDPOINTS_PER_INSTANCE
	int "Max number of registered endpoints per instance"
	default 2
	help
	  Maximal number of endpoints that can be registered for one instance.

config IPC_SERVICE_BACKEND_REG_PRIORITY
	int "Initialization priority of modules registering IPC backend"
	default 46
	help
	  The backend must be registered before the endpoint register.

module = IPC_SERVICE
module-str = IPC service and backend
source "${ZEPHYR_BASE}/subsys/logging/Kconfig.template.log_config"

endif # IPC_SERVICE
