common:
  tags: llext
  arch_allow:
    - arm
    - xtensa
  extra_conf_files:
    - prj.conf
    - ${ZEPHYR_BASE}/subsys/llext/${ARCH}-overlay.conf # arch-specific MPU disable
  filter: not CONFIG_MPU and not CONFIG_MMU and not CONFIG_SOC_SERIES_S32ZE_R52
  # Broken platforms
  platform_exclude:
    - nuvoton_pfm_m487 # See #63167
tests:
  llext.simple.readonly:
    arch_exclude: xtensa # for now
    extra_configs:
      - CONFIG_LLEXT_STORAGE_WRITABLE=n
  llext.simple.writable:
    extra_configs:
      - CONFIG_LLEXT_STORAGE_WRITABLE=y
