# Copyright (c) 2018, Endre Karlson
# Copyright (c) 2018, Song Qiang <songqiang1304521@gmail.com>
# SPDX-License-Identifier: Apache-2.0

description: ST STM32 family ADC

compatible: "st,stm32-adc"

include: [adc-controller.yaml, pinctrl-device.yaml]

properties:
    reg:
      required: true

    clocks:
      required: true

    interrupts:
      required: true

    "#io-channel-cells":
      const: 1

    pinctrl-0:
      required: true

    pinctrl-names:
      required: true

    st,adc-prescaler-type:
      type: int
      required: false
      enum:
        - 1 # SYNC for synchronous ADC clock source
        - 2 # ASYNC for asynchronous ADC clock source
      description: |
        type of ADC Clock source :
        - <ASYNC> : independent and asynchronous with the bus clock
        - <SYNC>: derived from the bus clock.

    st,adc-prescaler:
      type: int
      required: false
      enum:
        - 1 # not divided
        - 2
        - 4
        - 6
        - 8
        - 10
        - 12
        - 16
        - 32
        - 64
        - 128
        - 256
      description: |
        Clock prescaler at the input of the adc:
        can be LL_ADC_CLOCK_SYNC_PCLK_DIVx or LL_ADC_CLOCK_ASYNC_DIVx
        depending on the stm32 st,prescaler-type. Refer to the RefMan

    vref-mv:
      type: int
      required: false
      default: 3300
      description: Indicates the reference voltage of the ADC in mV (on the target board).

    has-temp-channel:
      type: boolean
      description: Indicates if the ADC has a dedicated internal temperature sensor channel.

    has-vref-channel:
      type: boolean
      description: Indicates if the ADC has a dedicated internal voltage reference channel.

    has-vbat-channel:
      type: boolean
      description: Indicates if the ADC has a dedicated internal vbat monitoring channel.

io-channel-cells:
    - input
