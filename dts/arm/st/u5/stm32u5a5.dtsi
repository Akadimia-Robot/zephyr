/*
 * Copyright (c) 2023 STMicroelectronics
 *
 * SPDX-License-Identifier: Apache-2.0
 */

#include <st/u5/stm32u595.dtsi>

/ {
	soc {
		compatible = "st,stm32u5a5", "st,stm32u5", "simple-bus";

		usbotg_hs: usb@42040000 {
		//usbphyc: otgfs@42040000 {
			compatible = "st,stm32-otghs";
			//compatible = "st,stm32-usbphyc";
			reg = <0x42040000 0x20000>;			
			interrupts = <73 0>;
			interrupt-names = "otghs";
			//num-bidir-endpoints = <16>;
			num-bidir-endpoints = <9>;
			ram-size = <1280>;
			//ram-size = <4096>;
			maximum-speed = "high-speed";
			//maximum-speed = "full-speed";
			clocks = <&rcc STM32_CLOCK_BUS_AHB2 0x0000C000>,
				 <&rcc STM32_SRC_HSE USBPHYC_SEL(0)>; //HSE
				 //<&rcc STM32_SRC_PLL1_P USBPHYC_SEL(2)>; //PLL1
 				 //<&rcc STM32_SRC_HSE OTGH_SEL(0)>;				
				 //<&rcc STM32_SRC_HSI48 ICKLK_SEL(1)>;
			phys = <&otghs_fs_phy>;
			//phys = <&usbphyc>;
			//compatible = "st,stm32-usbphyc";
			#phy-cells = <0>;			
			status = "disabled";
		};
	};

	otghs_fs_phy: otghs_fs_phy {
		compatible = "usb-nop-xceiv";
		#phy-cells = <0>;
	};
};
