
# Copyright (c) 2017 STMicroelectronics
#
# SPDX-License-Identifier: Apache-2.0
#

menuconfig LIS2DW12
	bool "LIS2DW12 I2C/SPI Three Axis Accelerometer"
	depends on SENSOR && (I2C || SPI)
	default n
	help
	  Enable driver for LIS2DW12 I2C-based acc sensor.

config LIS2DW12_NAME
	string "Driver name"
	default "LIS2DW12"
	depends on LIS2DW12
	help
	  Device name with which the LIS2DW12 sensor is identified.

choice
	prompt "Interface to AP"
	depends on LIS2DW12
	default LIS2DW12_SPI
	help
	  Select interface the LIS2DW12 driver is connected to AP

config LIS2DW12_SPI
	depends on SPI
	bool "SPI Interface"

config LIS2DW12_I2C
	depends on I2C
	bool "I2C Interface"

endchoice

if !HAS_DTS_I2C_DEVICE

config LIS2DW12_I2C_ADDR
	hex "I2C address"
	depends on LIS2DW12 && LIS2DW12_I2C
	default 0x18
	range 0x18 0x19
	help
	  I2C address of the LIS2DW12 sensor.
	  Use 0x18 if the SA1 pin is pulled to GND or 0x19 if the SA1 pin
	  is pulled to VDD.

config LIS2DW12_I2C_MASTER_DEV_NAME
	string "I2C master where LIS2DW12 is connected"
	depends on LIS2DW12 && LIS2DW12_I2C
	default "I2C_1"
	help
	  Specify the device name of the I2C master device to which LIS2DW12 is
	  connected.

endif #HAS_DTS_I2C_DEVICE

if !HAS_DTS_SPI_DEVICE

config LIS2DW12_SPI_SELECT_SLAVE
	hex "LIS2DW12 SPI slave select pin"
	depends on LIS2DW12 && LIS2DW12_SPI
	default 0
	help
	  LIS2DW12 chip select pin (active low).

config LIS2DW12_SPI_BUS_FREQ
	int "LIS2DW12 SPI bus speed in Hz"
	default 10000000
	depends on LIS2DW12 && LIS2DW12_SPI
	help
	  This is the maximum supported SPI bus frequency. The chip supports a
	  frequency up to 10MHz.

config LIS2DW12_SPI_MASTER_DEV_NAME
	string "SPI master controller port name"
	depends on LIS2DW12 && LIS2DW12_SPI
	default "SPI_0"
	help
	  Master SPI port name through which LIS2DW12 chip is accessed.

config LIS2DW12_SPI_GPIO_CS_DRV_NAME
	string "GPIO driver's name to use to drive SPI CS through"
	default ""
	depends on LIS2DW12_SPI_GPIO_CS
	help
	  This option is mandatory to set which GPIO controller to use in order
	  to actually emulate the SPI CS.

config LIS2DW12_SPI_GPIO_CS_PIN
	int "GPIO PIN to use to drive SPI CS through"
	default 0
	depends on LIS2DW12_SPI_GPIO_CS
	help
	  This option is mandatory to set which GPIO pin to use in order
	  to actually emulate the SPI CS.

endif #HAS_DTS_SPI_DEVICE

config LIS2DW12_SPI_GPIO_CS
	bool "LIS2DW12 SPI CS through a GPIO pin"
	default n
	depends on LIS2DW12 && LIS2DW12_SPI
	help
	  This option is useful if one needs to manage SPI CS through a GPIO
	  pin to by-pass the SPI controller's CS logic.

choice
	prompt "Trigger mode"
	depends on LIS2DW12
	default LIS2DW12_TRIGGER_GLOBAL_THREAD
	help
	  Specify the type of triggering to be used by the driver.

config LIS2DW12_TRIGGER_NONE
	bool "No trigger"

config LIS2DW12_TRIGGER_GLOBAL_THREAD
	bool "Use global thread"
	depends on GPIO
	select LIS2DW12_TRIGGER

config LIS2DW12_TRIGGER_OWN_THREAD
	bool "Use own thread"
	depends on GPIO
	select LIS2DW12_TRIGGER

endchoice

config LIS2DW12_TRIGGER
	bool
	depends on LIS2DW12

if !HAS_DTS_GPIO_DEVICE

config LIS2DW12_GPIO_DEV_NAME
	string "GPIO device"
	default "GPIO_0"
	depends on LIS2DW12 && LIS2DW12_TRIGGER
	help
	  The device name of the GPIO device to which the LIS2DW12 interrupt pins
	  are connected.

config LIS2DW12_GPIO_PIN_NUM
	int "Interrupt GPIO pin number"
	default 0
	depends on LIS2DW12 && LIS2DW12_TRIGGER
	help
	  The number of the GPIO on which the interrupt signal from the LIS2DW12
	  chip will be received.

endif # !HAS_DTS_GPIO_DEVICE

choice
	prompt "Sensor INT pin number"
	depends on LIS2DW12 && LIS2DW12_TRIGGER
	default LIS2DW12_INT_PIN_1
	help
	  The number of LIS2DW12 int pin used to generate interrupt to cpu.
	  Supported values are int1 or int2

config LIS2DW12_INT_PIN_1
	bool "int1"

config LIS2DW12_INT_PIN_2
	bool "int2"
endchoice

config LIS2DW12_THREAD_PRIORITY
	int "Thread priority"
	depends on LIS2DW12 && LIS2DW12_TRIGGER_OWN_THREAD
	default 10
	help
	  Priority of thread used by the driver to handle interrupts.

config LIS2DW12_THREAD_STACK_SIZE
	int "Thread stack size"
	depends on LIS2DW12 && LIS2DW12_TRIGGER_OWN_THREAD
	default 1024
	help
	  Stack size of thread used by the driver to handle interrupts.

choice
	prompt "Accelerometer Full-scale range setting"
	depends on LIS2DW12
	default LIS2DW12_ACCEL_RANGE_RUNTIME

config LIS2DW12_ACCEL_RANGE_RUNTIME
	bool "Set at runtime (Default 2G)"

config LIS2DW12_ACCEL_RANGE_2G
	bool "2G"

config LIS2DW12_ACCEL_RANGE_4G
	bool "4G"

config LIS2DW12_ACCEL_RANGE_8G
	bool "8G"

config LIS2DW12_ACCEL_RANGE_16G
	bool "16G"
endchoice

choice
	prompt "Accelerometer sampling frequency (ODR)"
	depends on LIS2DW12
	default LIS2DW12_ODR_RUNTIME

config LIS2DW12_ODR_RUNTIME
	bool "Set at runtime (Default 100 Hz)"

config LIS2DW12_ODR_1_6
	bool "1.6 Hz"

config LIS2DW12_ODR_12_5
	bool "12.5 Hz"

config LIS2DW12_ODR_25
	bool "25 Hz"

config LIS2DW12_ODR_50
	bool "50 Hz"

config LIS2DW12_ODR_100
	bool "100 Hz"

config LIS2DW12_ODR_200
	bool "200 Hz"

config LIS2DW12_ODR_400
	bool "400 Hz"

config LIS2DW12_ODR_800
	bool "800 Hz"

config LIS2DW12_ODR_1600
	bool "1600 Hz"

endchoice

choice
	prompt "Accelerometer Power Mode setting"
	depends on LIS2DW12
	default LIS2DW12_LOW_POWER_MODE_1

config LIS2DW12_LOW_POWER_MODE_1
	bool "Low-Power Mode 1 (12-bit resolution)"

config LIS2DW12_LOW_POWER_MODE_2
	bool "Low-Power Mode 2 (14-bit resolution)"

config LIS2DW12_LOW_POWER_MODE_3
	bool "Low-Power Mode 3 (14-bit resolution)"

config LIS2DW12_LOW_POWER_MODE_4
	bool "Low-Power Mode 4 (14-bit resolution)"

config LIS2DW12_HIGH_PERF_POWER_MODE
	bool "High-Performance Mode (14-bit resolution)"

endchoice

config LIS2DW12_POWER_MODE
	int
	default 0
	default 1 if LIS2DW12_LOW_POWER_MODE_2
	default 2 if LIS2DW12_LOW_POWER_MODE_3
	default 3 if LIS2DW12_LOW_POWER_MODE_4
	default 4 if LIS2DW12_HIGH_PERF_POWER_MODE
