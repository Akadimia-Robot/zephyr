/*
 * Copyright (c) 2021 Telink Semiconductor
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/dts-v1/;

#include <telink_b91.dtsi>

/ {
	model = "telink,b91";
	compatible = "telink,b91";

	aliases {
		led0 = &led_blue;
		led1 = &led_green;
		sw0 = &key_1;
		pwm-led0 = &pwm_led_blue;
		pwm-0 = &pwm0;
	};

	leds {
		compatible = "gpio-leds";

		led_blue: led_0 {
			gpios = <&gpiob 4 GPIO_ACTIVE_HIGH>;
			label = "LED Blue";
		};

		led_green: led_1 {
			gpios = <&gpiob 5 GPIO_ACTIVE_HIGH>;
			label = "LED Green";
		};

		led_white: led_2 {
			gpios = <&gpiob 6 GPIO_ACTIVE_HIGH>;
			label = "LED White";
		};

		led_red: led_3 {
			gpios = <&gpiob 7 GPIO_ACTIVE_HIGH>;
			label = "LED Red";
		};
	};

	pwm_leds {
		compatible = "pwm-leds";

		pwm_led_blue: pwm_led_0 {
			pwms = <&pwm0 0 0>;
			label = "PWM LED Blue";
		};
	};

	keys {
		compatible = "gpio-keys";
		key_1: button_1 {
			label = "User KEY1";
			gpios = <&gpioc 2 GPIO_PULL_DOWN>;
		};
	};

	chosen {
		zephyr,console = &uart0;
		zephyr,shell-uart = &uart0;
		zephyr,sram = &ram_dlm;
		zephyr,flash = &flash;
		zephyr,entropy = &trng0;
		zephyr,flash-controller = &flash_mspi;
	};
};

&cpu0 {
	clock-frequency = <48000000>;
};

&ram_ilm {
	reg = <0x00000000 0x00020000>;
};

&ram_dlm {
	reg = <0x00080000 0x00020000>;
};

&flash {
	reg = <0x20000000 0x100000>;
};

&gpiob {
	interrupts = <26 1>;
	status = "okay";
};

&gpioc {
	interrupts = <25 1>;
	status = "okay";
};

&pinmux {
	status = "okay";
};

&uart0 {
	status = "okay";
	current-speed = <115200>;
};

&hspi {
	status = "okay";
	cs0-pin = "HSPI_CSN_PA1";
};

&pspi {
	status = "okay";
	cs0-pin = "PSPI_CSN_PC4";
};

&i2c {
	status = "okay";
	clock-frequency = <I2C_BITRATE_FAST>;
};

&trng0 {
	status = "okay";
};

&pwm0 {
	status = "okay";
	clock-frequency = <93750>;
	clk32k-ch0-enable = <0>;
};

&flash_mspi {
	partitions {
		compatible = "fixed-partitions";
		#address-cells = <1>;
		#size-cells = <1>;

		boot_partition: partition@0 {
			label = "mcuboot";
			reg = <0x00000000 0x8000>;
		};
		slot0_partition: partition@8000 {
			label = "image-0";
			reg = <0x00008000 0x1a000>;
		};
		slot1_partition: partition@22000 {
			label = "image-1";
			reg = <0x00022000 0x1a000>;
		};
		scratch_partition: partition@3c000 {
			label = "image-scratch";
			reg = <0x0003c000 0x2000>;
		};
		storage_partition: partition@F0000 {
			label = "storage";
			reg = <0x000F0000 0x00010000>;
		};
	};
};
